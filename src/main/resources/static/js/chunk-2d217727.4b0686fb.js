(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217727"],{c785:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",[a("el-row",[a("el-button",{attrs:{type:"success",icon:"el-icon-search",plain:"",size:"mini"},on:{click:function(t){e.dialogAddUser=!0}}},[e._v("添加用户")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-delete",plain:"",size:"mini"},on:{click:function(t){return e.deleteUser(e.users)}}},[e._v("删除用户")])],1),a("el-row",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.selectFormT}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"用户名",size:"mini",clearable:""},model:{value:e.selectFormT.username,callback:function(t){e.$set(e.selectFormT,"username",t)},expression:"selectFormT.username"}})],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},model:{value:e.selectFormT.role.id,callback:function(t){e.$set(e.selectFormT.role,"id",t)},expression:"selectFormT.role.id"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"succ ess",size:"mini",icon:"el-icon-search",plain:""},on:{click:function(t){return e.selectClick(e.selectFormT)}}},[e._v("搜索")])],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData.data,"tooltip-effect":"dark"},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"用户id",width:"70"}}),a("el-table-column",{attrs:{label:"用户名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.username))]}}])}),a("el-table-column",{attrs:{label:"所属角色",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.role.name))]}}])}),a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.status?"启用":"注销"))]}}])}),a("el-table-column",{attrs:{label:"密码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.password))]}}])}),a("el-table-column",{attrs:{prop:"tel",label:"联系电话"}}),a("el-table-column",{attrs:{width:"150",label:"角色操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:1===t.row.id},on:{click:function(a){return e.editRow(t.row)}}},[e._v("编辑 ")]),a("el-button",{attrs:{size:"mini",disabled:1===t.row.id,type:"danger"},on:{click:function(a){return e.deleteRow(t.row.id)}}},[e._v("删除 ")])]}}])})],1),a("el-row",[a("el-pagination",{attrs:{"current-page":e.tableData.page,"page-sizes":[5,10,15,20],"page-size":e.selectForm.pageShowNumber,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.maxPageNumber},on:{"size-change":e.setPageShowNumber,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogAddUser},on:{"update:visible":function(t){e.dialogAddUser=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addUserForm,rules:e.addUserRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",clearable:"","show-password":""},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),a("el-form-item",{attrs:{label:"所属角色",prop:"role.id"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.addUserForm.role.id,callback:function(t){e.$set(e.addUserForm.role,"id",t)},expression:"addUserForm.role.id"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"电话",prop:"tel"}},[a("el-input",{attrs:{clearable:"",type:"number"},model:{value:e.addUserForm.tel,callback:function(t){e.$set(e.addUserForm,"tel",t)},expression:"addUserForm.tel"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddUser=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改",visible:e.dialogUpdateUser},on:{"update:visible":function(t){e.dialogUpdateUser=t}}},[a("el-form",{ref:"updateForm",attrs:{model:e.updateUserForm,rules:e.updateUserRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.updateUserForm.username,callback:function(t){e.$set(e.updateUserForm,"username",t)},expression:"updateUserForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",clearable:"","show-password":""},model:{value:e.updateUserForm.password,callback:function(t){e.$set(e.updateUserForm,"password",t)},expression:"updateUserForm.password"}})],1),a("el-form-item",{attrs:{label:"状态",prop:""}},[a("el-select",{attrs:{clearable:"",placeholder:"状态"},model:{value:e.updateUserForm.status,callback:function(t){e.$set(e.updateUserForm,"status",t)},expression:"updateUserForm.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"所属角色",prop:"role.id"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.updateUserForm.role.id,callback:function(t){e.$set(e.updateUserForm.role,"id",t)},expression:"updateUserForm.role.id"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"电话",prop:"tel"}},[a("el-input",{attrs:{clearable:"",type:"number"},model:{value:e.updateUserForm.tel,callback:function(t){e.$set(e.updateUserForm,"tel",t)},expression:"updateUserForm.tel"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogUpdateUser=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUser()}}},[e._v("确 定")])],1)],1)],1)},s=[],l={name:"Users",data:function(){return{tableData:{data:[{id:1,username:"admin",status:1,tel:"188888888",password:"123123",role:{id:1,name:"admin"}}],page:1,maxPageNumber:null},selectForm:{username:null,role:{id:null},pageShowNumber:5},selectFormT:{username:null,role:{id:null},pageShowNumber:5},roles:[],users:[],dialogAddUser:!1,addUserForm:{username:"",password:"",tel:null,role:{id:null}},addUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6到 15 个字符",trigger:"blur"}],role:{id:[{required:!0,message:"请选择角色",trigger:"change"}]}},dialogUpdateUser:!1,updateUserForm:{username:"",password:"",tel:null,role:{id:null}},updateUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6到 15 个字符",trigger:"blur"}],role:{id:[{required:!0,message:"请选择角色",trigger:"change"}]}},statusList:[{id:1,name:"启用"},{id:2,name:"注销"}]}},methods:{select:function(e){var t=this;this.$axios.post("user/query/"+this.tableData.page,e).then((function(e){200===e.data.code?(console.log(e.data.data),t.tableData.maxPageNumber=e.data.data.maxPageNumber,t.tableData.data=e.data.data.tableData,console.log(e.data)):t.$notify.error({title:e.data.message,context:e.data.code})}))},selectClick:function(e){this.selectForm=e,this.select(e)},setPageShowNumber:function(e){this.selectForm.pageShowNumber=e,this.select(this.selectForm)},handleCurrentChange:function(e){this.tableData.page=e,this.select(this.selectForm)},editRow:function(e){this.updateUserForm=JSON.parse(JSON.stringify(e)),this.dialogUpdateUser=!0},deleteRow:function(e){var t=this;this.$axios.delete("user/delete/"+e).then((function(e){200===e.data.code?(t.$notify.success({title:"成功"+e.data.code,message:e.data.message}),t.select(t.selectForm)):t.$notify.error({title:"失败"+e.data.code,message:e.data.message})}))},selectionChange:function(e){this.users=e,console.log(this.users)},deleteUser:function(e){var t=this;e.length>0?this.$axios.post("user/delete",e).then((function(e){200===e.data.code?(t.$notify.success({dangerouslyUseHTMLString:!0,title:"成功"+e.data.code,message:e.data.message}),t.select(t.selectForm)):t.$notify.error({dangerouslyUseHTMLString:!0,title:"失败"+e.data.code,message:e.data.message})})):this.$message.warning("请选择！")},addUser:function(){var e=this;this.$refs.addForm.validate((function(t){t?(e.$axios.post("user/add",e.addUserForm).then((function(t){200===t.data.code?(console.log(t.data),e.$notify.success({title:"添加成功"+t.data.code,message:t.data.message}),e.select(e.selectForm)):e.$notify.warning({title:"添加失败"+t.data.code,message:t.data.message})})),e.dialogAddUser=!1,e.$refs.addForm.resetFields()):e.$message.error("请正确输入!")}))},updateUser:function(){var e=this;this.$refs.updateForm.validate((function(t){t?(e.$axios.put("user/update",e.updateUserForm).then((function(t){200===t.data.code?(e.$notify.success({title:"成功"+t.data.code,message:t.data.message}),e.select(e.selectForm)):e.$notify.warning({title:"失败"+t.data.code,message:t.data.message})})),e.dialogUpdateUser=!1):e.$message.warning("请正确输入")}))}},created:function(){var e=this;this.$axios.get("role/queryAll").then((function(t){e.roles=t.data.data})),this.select(this.selectForm)}},o=l,i=a("2877"),n=Object(i["a"])(o,r,s,!1,null,"6ddb70c6",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d217727.4b0686fb.js.map