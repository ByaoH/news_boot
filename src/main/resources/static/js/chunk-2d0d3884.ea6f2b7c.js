(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3884"],{"5cbb":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("个人管理")]),a("el-breadcrumb-item",[e._v("我的评论")])],1),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{width:"100",label:"评论id",prop:"id"}}),a("el-table-column",{attrs:{label:"评论内容",prop:"content"}}),a("el-table-column",{attrs:{label:"发表用户",prop:"user.username"}}),a("el-table-column",{attrs:{label:"新闻标题",prop:"mnew.title"}}),a("el-table-column",{attrs:{width:"160",label:"评论时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(t.row.publishTime).toLocaleString())+" ")]}}])}),a("el-table-column",{attrs:{width:"150",label:"评论操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除 ")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"修改评论",visible:e.dialogUpdate},on:{"update:visible":function(t){e.dialogUpdate=t}}},[a("el-form",{ref:"updateForm",attrs:{model:e.updateForm,rules:e.addRules}},[a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{clearable:""},model:{value:e.updateForm.content,callback:function(t){e.$set(e.updateForm,"content",t)},expression:"updateForm.content"}})],1),a("el-form-item",{attrs:{label:"用户id",prop:"user.id"}},[a("el-input",{attrs:{clearable:""},model:{value:e.updateForm.user.id,callback:function(t){e.$set(e.updateForm.user,"id",t)},expression:"updateForm.user.id"}})],1),a("el-form-item",{attrs:{label:"新闻id",prop:"mNew.id"}},[a("el-input",{attrs:{clearable:""},model:{value:e.updateForm.mNew.id,callback:function(t){e.$set(e.updateForm.mNew,"id",t)},expression:"updateForm.mNew.id"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogUpdate=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateComment()}}},[e._v("确 定")])],1)],1)],1)},r=[],l={name:"MyComment",data:function(){return{myUser:JSON.parse(sessionStorage.getItem("user")),tableData:[],addRules:{content:[{required:!0,message:"请输入评论信息",trigger:"blur"},{min:2,message:"最少两个字符",trigger:"blur"}],user:{id:[{required:!0,message:"请输入用户id",trigger:"change"}]},mNew:{id:[{required:!0,message:"请输入新闻id",trigger:"change"}]}},dialogUpdate:!1,updateForm:{id:null,content:null,user:{id:null},mNew:{id:null}}}},methods:{select:function(){var e=this;this.$axios.post("comment/query/1",{pageShowNumber:999999,user:this.myUser}).then((function(t){e.tableData=t.data.data.data}))},editRow:function(e){console.log(e),this.dialogUpdate=!0,this.updateForm.id=e.id,this.updateForm.mNew.id=e.mnew.id,this.updateForm.content=e.content,this.updateForm.user.id=e.user.id},deleteRow:function(e){var t=this;this.$axios.delete("comment/delete/"+e.id).then((function(e){200===e.data.code?(t.$notify.success({title:"删除成功!code:"+e.data.code,message:"message:"+e.data.message}),t.select(t.selectForm)):t.$notify.warning({title:"删除失败!code:"+e.data.code,message:"message:"+e.data.message})}))},updateComment:function(){var e=this;this.$refs.updateForm.validate((function(t){t?e.$axios.put("comment/update",e.updateForm).then((function(t){200===t.data.code?(e.$notify.success({title:"修改成功!code:"+t.data.code,message:"message:"+t.data.message}),e.select(e.selectForm)):e.$notify.warning({title:"修改失败!code:"+t.data.code,message:"message:"+t.data.message}),e.dialogUpdate=!1})):e.$message.error("请正确输入")}))}},created:function(){this.select()}},s=l,i=a("2877"),n=Object(i["a"])(s,o,r,!1,null,"a0401ef4",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0d3884.ea6f2b7c.js.map